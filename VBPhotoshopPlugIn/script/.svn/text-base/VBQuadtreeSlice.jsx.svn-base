#target photoshopvar document = app.activeDocument;var depth = 0;var size = 256;var maxwidth = 8192;var maxheight = 8192;var width = maxwidth;var height = maxheight;var x = 0;var y = 0;function VBCrop() {    var name = "beatles_" + depth + "_" + (x / 256) + "_" + (y / 256) + ".png";    var bounds = new Array();    bounds[0] = UnitValue(x, "px");    bounds[1] = UnitValue(y, "px");    bounds[2] = UnitValue(x + size, "px");    bounds[3] = UnitValue(y + size, "px");        document.crop(bounds);    document.saveAs(new File(Folder.current.fsName + "/" + name), new PNGSaveOptions, true);}while(true) {    if(width < size)        break;    if(height < size)        break;        while(true) {        if(y > height - size) {            y = 0;            break;        }        if(x > width - size) {            x = 0;            y += size;        } else {                document.suspendHistory("mark", "VBCrop()");            executeAction(charIDToTypeID("undo"), undefined, DialogModes.NO);            x += size;        }    }    depth += 1;    width /= 2;    height /= 2;    document.resizeImage(UnitValue(width, "px"), UnitValue(height, "px"));}